<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini Navigateur</title>
  <style>
    :root { --bg:#0f1720; --panel:#111827; --muted:#9aa4b2; --accent:#0ea5a1; }
    html,body { height:100%; margin:0; font-family:Inter, Arial, sans-serif; background:var(--bg); color:#e6eef3; }
    .app { display:grid; grid-template-columns:220px 1fr; height:100vh; }
    .sidebar { background:var(--panel); padding:12px; border-right:1px solid rgba(255,255,255,0.03); }
    .sidebar h3 { margin:6px 0 10px; font-size:14px; color:var(--muted); }
    .bookmark { display:block; padding:8px; margin-bottom:6px; background:rgba(255,255,255,0.02); border-radius:6px; color:#e6eef3; text-decoration:none; }
    .bookmark:hover { background:rgba(255,255,255,0.03); }
    .main { display:flex; flex-direction:column; }
    .toolbar { display:flex; gap:8px; padding:10px; align-items:center; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); }
    .btn { background:transparent; border:1px solid rgba(255,255,255,0.04); color:#e6eef3; padding:6px 10px; border-radius:6px; cursor:pointer; }
    .btn:disabled { opacity:0.4; cursor:default }
    #url { flex:1; padding:8px 10px; border-radius:6px; border:none; background:#0b1220; color:#e6eef3; }
    iframe { border:none; flex:1; width:100%; height:100%; background:white }
    .footer { padding:6px 10px; font-size:12px; color:var(--muted); }
    @media (max-width:700px){ .app{grid-template-columns:1fr} .sidebar{display:none} }
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <h3>‚úÖ Favoris</h3>
      <a class="bookmark" href="#" data-url="pages/home.html">Accueil</a>
      <a class="bookmark" href="#" data-url="pages/about.html">√Ä propos</a>
      <a class="bookmark" href="#" data-url="pages/contact.html">Contact</a>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:10px 0">
      <div style="font-size:13px;color:var(--muted)">Astuce: utilisez la barre d'adresse pour saisir une URL ou le chemin local (ex: <code>pages/about.html</code>).</div>
    </aside>

    <main class="main">
      <div class="toolbar">
        <button class="btn" id="back">‚óÄ</button>
        <button class="btn" id="forward">‚ñ∂</button>
        <button class="btn" id="home">üè†</button>
        <button class="btn" id="reload">‚ü≥</button>
        <input id="url" type="text" placeholder="Entrez une URL ou chemin local (ex: pages/home.html)">
        <button class="btn" id="go">Go</button>
      </div>

      <iframe id="navigateur" src=""></iframe>

      <div class="footer">Mini Navigateur ‚Äî pages locales et navigation simple</div>
    </main>
  </div>

  <script>
    // Navigation history simple
    const iframe = document.getElementById('navigateur');
    const input = document.getElementById('url');
    const goBtn = document.getElementById('go');
    const backBtn = document.getElementById('back');
    const forwardBtn = document.getElementById('forward');
    const homeBtn = document.getElementById('home');
    const reloadBtn = document.getElementById('reload');

    const DEFAULT_HOME = 'pages/home.html';
    let historyStack = [];
    let historyIndex = -1;

    function updateButtons(){
      backBtn.disabled = historyIndex <= 0;
      forwardBtn.disabled = historyIndex >= historyStack.length - 1 || historyIndex === -1;
    }

    function navigate(url, add=true){
      if (!url) return;
      // allow bare local paths (no scheme)
      if (!url.match(/^([a-z]+:)?\/\//i) && !url.startsWith('pages/') && !url.endsWith('.html')){
        // If user typed something like 'example.com', try https
        if (url.includes('.') && !url.includes('/')) url = 'https://' + url;
      }

      iframe.src = url;
      input.value = url;

      if (add){
        // truncate forward history
        historyStack = historyStack.slice(0, historyIndex + 1);
        historyStack.push(url);
        historyIndex = historyStack.length - 1;
      }
      updateButtons();
    }

    // Buttons
    goBtn.addEventListener('click', ()=>{ navigate(input.value.trim(), true); });
    input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') goBtn.click(); });
    backBtn.addEventListener('click', ()=>{ if(historyIndex>0){ historyIndex--; navigate(historyStack[historyIndex], false); } });
    forwardBtn.addEventListener('click', ()=>{ if(historyIndex < historyStack.length -1){ historyIndex++; navigate(historyStack[historyIndex], false); } });
    homeBtn.addEventListener('click', ()=>{ navigate(DEFAULT_HOME, true); });
    reloadBtn.addEventListener('click', ()=>{ iframe.contentWindow.location.reload(); });

    // Favoris
    document.querySelectorAll('.bookmark').forEach(el => {
      el.addEventListener('click', (e)=>{ e.preventDefault(); const url = el.dataset.url; navigate(url, true); });
    });

    // Mettre √† jour l'URL quand iframe charge (utile si la page modifie l'historique interne)
    iframe.addEventListener('load', ()=>{
      try{
        const current = iframe.contentWindow.location.href;
        // Si c'est un chemin local file://, simplifier l'affichage vers le chemin relatif si possible
        if (current.startsWith('file:')){
          // extraire le dernier segment (ex: file:///C:/.../pages/home.html)
          const parts = current.split('/');
          const last = parts.slice(-2).join('/');
          input.value = last; 
        } else {
          input.value = current;
        }
      }catch(e){
        // Cross-origin -> ne pas lire location, garder ce qui est dans input
      }
    });

    // Lancer sur la page d'accueil par d√©faut
    navigate(DEFAULT_HOME, true);

    // (Optionnel) interception des liens target=_blank dans l'iframe vers le m√™me iframe
    // impossible facilement en cross-origin; pour les pages locales √ßa fonctionne si elles sont dans le m√™me domaine fichier.
  </script>
</body>
</html>
